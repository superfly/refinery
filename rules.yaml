RulesVersion: 2
Samplers:
  __default__:
    DeterministicSampler:
      SampleRate: 1
  prod:
    RulesBasedSampler:
      Rules:
        - Name: keep fsm actions
          Conditions:
            - Field: fsm.action
              Operator: exists
          Drop: false
          SampleRate: 1
        - Name: Corrosion Ops dynamic sampler
          Conditions:
            - Field: http.url
              Operator: =
              Value: "http://[fc01::1]:7878/v1/ops"
              Datatype: string
            - Field: http.status_code
              Operator: exists
          Sampler:
            EMADynamicSampler:
              GoalSampleRate: 25
              AdjustmentInterval: "15s"
              Weight: 0.5
              AgeOutValue: 0.5
              BurstMultiple: 2
              BurstDetectionDelay: 1
              MaxKeys: 500
              UseTraceLength: false
              FieldList:
                - http.url
                - http.status_code
        - Name: RPC dynamic sampler
          Conditions:
            - Field: rpc.service
              Operator: exists
            - Field: rpc.method
              Operator: exists
            - Field: cloud.region
              Operator: exists
            - Field: status_code
              Operator: exists
          Sampler:
            EMADynamicSampler:
              GoalSampleRate: 25
              AdjustmentInterval: "15s"
              Weight: 0.5
              AgeOutValue: 0.5
              BurstMultiple: 2
              BurstDetectionDelay: 1
              MaxKeys: 500
              UseTraceLength: false
              FieldList:
                - cloud.region
                - rpc.service
                - rpc.method
                - status_code
        - Name: default
          SampleRate: 70
